version: "3"

services:
  nginx:
    image: $REGISTRY/ida/nginx:$VERSION
    ports:
      - 8080:80
    networks:
      - ida-net
  ida-backend:
    image: $REGISTRY/ida/backend-server:$VERSION
    volumes:
      - "~/ida-prod-logs:/usr/local/tomcat/logs"
    environment:
      - FUSEKI_URL=http://fuseki:3030/
      - FUSEKI_USER=admin
      - FUSEKI_PW=$FUSEKI_PW
    networks:
      - ida-net
  fuseki:
    image: stain/jena-fuseki
    ports:
      - 3030:3030
    environment:
      - ADMIN_PASSWORD=$FUSEKI_PW
    volumes:
      - ./fuseki:/fuseki
    networks:
      - ida-net
networks:
  ida-net:
